(function(){my={};my.Class=function(){var e=arguments.length;var d=arguments[e-1];var f=e>1?arguments[0]:null;var j=e>2;var g,c;if(d.constructor===Object){g=function(){}}else{g=d.constructor;delete d.constructor}if(f){c=function(){};c.prototype=f.prototype;g.prototype=new c();g.prototype.constructor=g;g.Super=f;b(g,f,false)}if(j){for(var h=1;h<e-1;h++){b(g.prototype,arguments[h].prototype,false)}}a(g,d);return g};var a=my.extendClass=function(c,e,d){if(e.STATIC){b(c,e.STATIC,d);delete e.STATIC}b(c.prototype,e,d)};var b=function(d,f,c){var e;if(c===false){for(e in f){if(!(e in d)){d[e]=f[e]}}}else{for(e in f){d[e]=f[e]}if(f.toString!==Object.prototype.toString){d.toString=f.toString}}}})();var Mustache=function(){var a=function(){};a.prototype={otag:"{{",ctag:"}}",pragmas:{},buffer:[],pragmas_implemented:{"IMPLICIT-ITERATOR":true},context:{},render:function(e,d,c,f){if(!f){this.context=d;this.buffer=[]}if(!this.includes("",e)){if(f){return e}else{this.send(e);return}}e=this.render_pragmas(e);var b=this.render_section(e,d,c);if(f){return this.render_tags(b,d,c,f)}this.render_tags(b,d,c,f)},send:function(b){if(b!=""){this.buffer.push(b)}},render_pragmas:function(b){if(!this.includes("%",b)){return b}var d=this;var c=new RegExp(this.otag+"%([\\w-]+) ?([\\w]+=[\\w]+)?"+this.ctag);return b.replace(c,function(g,e,f){if(!d.pragmas_implemented[e]){throw ({message:"This implementation of mustache doesn't understand the '"+e+"' pragma"})}d.pragmas[e]={};if(f){var h=f.split("=");d.pragmas[e][h[0]]=h[1]}return""})},render_partial:function(b,d,c){b=this.trim(b);if(!c||c[b]===undefined){throw ({message:"unknown_partial '"+b+"'"})}if(typeof(d[b])!="object"){return this.render(c[b],d,c,true)}return this.render(c[b],d[b],c,true)},render_section:function(d,c,b){if(!this.includes("#",d)&&!this.includes("^",d)){return d}var f=this;var e=new RegExp(this.otag+"(\\^|\\#)\\s*(.+)\\s*"+this.ctag+"\n*([\\s\\S]+?)"+this.otag+"\\/\\s*\\2\\s*"+this.ctag+"\\s*","mg");return d.replace(e,function(h,i,g,j){var k=f.find(g,c);if(i=="^"){if(!k||f.is_array(k)&&k.length===0){return f.render(j,c,b,true)}else{return""}}else{if(i=="#"){if(f.is_array(k)){return f.map(k,function(l){return f.render(j,f.create_context(l),b,true)}).join("")}else{if(f.is_object(k)){return f.render(j,f.create_context(k),b,true)}else{if(typeof k==="function"){return k.call(c,j,function(l){return f.render(l,c,b,true)})}else{if(k){return f.render(j,c,b,true)}else{return""}}}}}}})},render_tags:function(k,b,d,f){var e=this;var j=function(){return new RegExp(e.otag+"(=|!|>|\\{|%)?([^\\/#\\^]+?)\\1?"+e.ctag+"+","g")};var g=j();var h=function(n,i,m){switch(i){case"!":return"";case"=":e.set_delimiters(m);g=j();return"";case">":return e.render_partial(m,b,d);case"{":return e.find(m,b);default:return e.escape(e.find(m,b))}};var l=k.split("\n");for(var c=0;c<l.length;c++){l[c]=l[c].replace(g,h,this);if(!f){this.send(l[c])}}if(f){return l.join("\n")}},set_delimiters:function(c){var b=c.split(" ");this.otag=this.escape_regex(b[0]);this.ctag=this.escape_regex(b[1])},escape_regex:function(c){if(!arguments.callee.sRE){var b=["/",".","*","+","?","|","(",")","[","]","{","}","\\"];arguments.callee.sRE=new RegExp("(\\"+b.join("|\\")+")","g")}return c.replace(arguments.callee.sRE,"\\$1")},find:function(c,d){c=this.trim(c);function b(f){return f===false||f===0||f}var e;if(b(d[c])){e=d[c]}else{if(b(this.context[c])){e=this.context[c]}}if(typeof e==="function"){return e.apply(d)}if(e!==undefined){return e}return""},includes:function(c,b){return b.indexOf(this.otag+c)!=-1},escape:function(b){b=String(b===null?"":b);return b.replace(/&(?!\w+;)|["'<>\\]/g,function(c){switch(c){case"&":return"&amp;";case"\\":return"\\\\";case'"':return"&quot;";case"'":return"&#39;";case"<":return"&lt;";case">":return"&gt;";default:return c}})},create_context:function(c){if(this.is_object(c)){return c}else{var d=".";if(this.pragmas["IMPLICIT-ITERATOR"]){d=this.pragmas["IMPLICIT-ITERATOR"].iterator}var b={};b[d]=c;return b}},is_object:function(b){return b&&typeof b=="object"},is_array:function(b){return Object.prototype.toString.call(b)==="[object Array]"},trim:function(b){return b.replace(/^\s*|\s*$/g,"")},map:function(f,d){if(typeof f.map=="function"){return f.map(d)}else{var e=[];var b=f.length;for(var c=0;c<b;c++){e.push(d(f[c]))}return e}}};return({name:"mustache.js",version:"0.3.1-dev",to_html:function(d,b,c,f){var e=new a();if(f){e.send=f}e.render(d,b,c);if(!f){return e.buffer.join("\n")}}})}();(function(){var f=my.Class({log:function d(k){if(window.console&&window.console.log){console.log(k.toStirng())}},getNS:function b(n,o){var p=n.split(".");var m=window;for(var l=0,k=p.length;l<k;l++){if("object"!=typeof(m[p[l]])){m[p[l]]={}}m=m[p[l]]}return m},bind:function g(l,k){return function(){return l.apply(k,arguments)}},EmptyFn:function a(){},generateId:function h(m){msg=[m,(new Date).getTime(),Math.random().toString()].join("");function o(C,B){var A=(C<<B)|(C>>>(32-B));return A}function F(D){var C="";var A;var E;var B;for(A=0;A<=6;A+=2){E=(D>>>(A*4+4))&15;B=(D>>>(A*4))&15;C+=E.toString(16)+B.toString(16)}return C}function H(D){var C="";var B;var A;for(B=7;B>=0;B--){A=(D>>>(B*4))&15;C+=A.toString(16)}return C}function l(B){B=B.replace(/\r\n/g,"\n");var A="";for(var D=0;D<B.length;D++){var C=B.charCodeAt(D);if(C<128){A+=String.fromCharCode(C)}else{if((C>127)&&(C<2048)){A+=String.fromCharCode((C>>6)|192);A+=String.fromCharCode((C&63)|128)}else{A+=String.fromCharCode((C>>12)|224);A+=String.fromCharCode(((C>>6)&63)|128);A+=String.fromCharCode((C&63)|128)}}}return A}var r;var J,I;var n=new Array(80);var v=1732584193;var t=4023233417;var s=2562383102;var q=271733878;var p=3285377520;var G,z,y,x,w;var K;msg=l(msg);var k=msg.length;var u=new Array();for(J=0;J<k-3;J+=4){I=msg.charCodeAt(J)<<24|msg.charCodeAt(J+1)<<16|msg.charCodeAt(J+2)<<8|msg.charCodeAt(J+3);u.push(I)}switch(k%4){case 0:J=2147483648;break;case 1:J=msg.charCodeAt(k-1)<<24|8388608;break;case 2:J=msg.charCodeAt(k-2)<<24|msg.charCodeAt(k-1)<<16|32768;break;case 3:J=msg.charCodeAt(k-3)<<24|msg.charCodeAt(k-2)<<16|msg.charCodeAt(k-1)<<8|128;break}u.push(J);while((u.length%16)!=14){u.push(0)}u.push(k>>>29);u.push((k<<3)&4294967295);for(r=0;r<u.length;r+=16){for(J=0;J<16;J++){n[J]=u[r+J]}for(J=16;J<=79;J++){n[J]=o(n[J-3]^n[J-8]^n[J-14]^n[J-16],1)}G=v;z=t;y=s;x=q;w=p;for(J=0;J<=19;J++){K=(o(G,5)+((z&y)|(~z&x))+w+n[J]+1518500249)&4294967295;w=x;x=y;y=o(z,30);z=G;G=K}for(J=20;J<=39;J++){K=(o(G,5)+(z^y^x)+w+n[J]+1859775393)&4294967295;w=x;x=y;y=o(z,30);z=G;G=K}for(J=40;J<=59;J++){K=(o(G,5)+((z&y)|(z&x)|(y&x))+w+n[J]+2400959708)&4294967295;w=x;x=y;y=o(z,30);z=G;G=K}for(J=60;J<=79;J++){K=(o(G,5)+(z^y^x)+w+n[J]+3395469782)&4294967295;w=x;x=y;y=o(z,30);z=G;G=K}v=(v+G)&4294967295;t=(t+z)&4294967295;s=(s+y)&4294967295;q=(q+x)&4294967295;p=(p+w)&4294967295}var K=H(v)+H(t)+H(s)+H(q)+H(p);return["id-",K.toLowerCase()].join("")},collectionToArray:function c(n){var m=[];for(var l=0,k=n.length;l<k;l++){m.push(n[l])}return m},deepCopy:function e(k,l){if(undefined!==k){if(undefined==l){var l={}}for(prop in k){if(l.hasOwnProperty(prop)){if(typeof k[prop]!=="object"){l[prop]=k[prop]}else{e(k[prop],l[prop])}}else{if(typeof(k[prop])!=="object"){l[prop]=k[prop]}else{if(k[prop] instanceof Array){l[prop]=[]}else{l[prop]={}}e(k[prop],l[prop])}}}}else{throw new Error("no source object")}return l}});var j=new f();var i=j.getNS("oo.core");i.utils=j;return oo})();var oo=(function(a){var e={};var b={};var f=this;var d=function(j,h){var i;if(typeof j=="object"&&j.sc&&j.fn){i={fn:j.fn,sc:j.sc}}else{i={fn:j,sc:f}}if(h){i.se=h}return i};b.addListener=function c(h,k,i){if(!e[h]){e[h]=[]}var j=d(k,i);e[h].push(j)};b.removeListener=function g(h,l,j){if(e[h]){var k=d(l,j);var i=e[h].indexOf(k);if(-1!=i){e[h].splice(i,1)}}};b.triggerEvent=function c(j,l,n){if(e[j]){for(var k=0,h=e[j].length;k<h;k++){var m=e[j][k];if(undefined===m.se||m.se===l){m.fn.apply(m.sc,n)}}}};a.Events=b;return a})(oo||{});var oo=(function(a){var h="ontouchstart" in window?true:false;var g=function g(j,i){if(h){i=i||0;var k=j.touches[i];if(undefined===k){k=j.changedTouches[i]}}else{k=j}return[parseInt(k.pageX,10),parseInt(k.pageY,10)]};var e=my.Class({STATIC:{getPosition:g,getPositionX:function d(j,i){return g(j,i)[0]},getPositionY:function c(j,i){return g(j,i)[1]},getTarget:function f(j,i){return j.touches[i||0].target}}});if(!h){e.EVENT_START="mousedown";e.EVENT_MOVE="mousemove";e.EVENT_END="mouseup"}else{e.EVENT_START="touchstart";e.EVENT_MOVE="touchmove";e.EVENT_END="touchend"}var b=a.core.utils.getNS("oo.View");b.Touch=e;return a})(oo||{});var oo=(function(a){var c={};var b={requestParams:{},dispatch:function e(l){b.parseRoute(l);if(b.requestParams){var k=[b.requestParams.controller.charAt(0).toUpperCase(),b.requestParams.controller.substring(1),"Controller"].join("");var i=[b.requestParams.action,"Action"].join("");var j;if(typeof c[k]!=="function"){if(undefined===c[k]){c[k]=CONTROLLERS[k]}j=c[k];if(typeof j[i]==="function"){return j[i](b.requestParams.params)}}}},parseRoute:function g(j){var i=b.routes;var k=null,l;for(var m in i){var l=i[m];if(l.url==j.substring(0,l.url.length)){k={controller:l.controller,action:l.action};j=j.substring(l.url.length)}}if("/"==j.substring(0,1)){j=j.slice(1)}var n=j.split("/");if(!k){k={controller:n[0],action:n[1]};if(!k.controller){k.controller="index"}else{n.shift()}if(!k.action||k.action==undefined){k.action="index"}else{n.shift()}}k.params={};while(n.length){paramName=n.shift();if(paramName){paramValue=n.shift();if(paramValue!==undefined){k.params[paramName]=paramValue}}}b.requestParams=k;return k},url:function d(i,m){var j=b.routes[i];if(!j){throw Error("route name doesnâ€™t exists")}var k="";for(var l in m){k=[k,"/",l,"/",m[l]].join("")}return[j.url,k].join("")},load:function f(i){window.location.hash=i},init:function h(i){window.addEventListener("hashchange",function(j){b.dispatch(window.location.hash.slice(1))},false);b.dispatch(window.location.hash.slice(1))}};a.Router=b;return a})(oo||{});var oo=(function(h){var g=h.View.Dom,b=h.Touch,n=h.Events;var j=my.Class({STATIC:{EVT_REFRESH:"refresh"},constructor:function c(q){this._data=q;this._snapshot=null;this._orderByCol=null;this._grouped=null;this._filterFn=null},setData:function o(q){this._data=q;this._takeSnapshot()},setFilter:function m(q){this._filterFn=q;this._takeSnapshot()},setNoFilter:function a(){this._filterFn=function(){return true};this._takeSnapshot()},setOrderCol:function k(q,r){this._orderByCol=q;this._grouped=r;this._takeSnapshot()},_filter:function i(q){if(q){this._filterFn=q}if(typeof this._filterFn=="function"){this._snapshot=this._data.filter(this._filterFn);return true}return false},_order:function f(){if(this._orderByCol){var q=[];var r=this;this._snapshot.forEach(function(v,u,x){var s=0,w=q.length;while(s<w){var t=(s+w)>>1;q[t][r._orderByCol]<v[r._orderByCol]?s=t+1:w=t}q.splice(s,0,v)});this._snapshot=q;return true}return false},_takeSnapshot:function l(){var r=this._filter();var q=this._order();if(r||q){n.triggerEvent(j.EVT_REFRESH,this)}else{this._snapshot=this._data}},getData:function e(r){var w=[];if(null===this._snapshot||r){this._takeSnapshot()}w=this._snapshot;if(this._grouped&&this._orderByCol){w=[];var v="",u="";for(var s=0,q=this._snapshot.length;s<q;s++){var t=this._snapshot[s];u=t.nom.substring(0,1);if(v!=u){w.push({id:"separator",cropped:u});v=u}w.push(t)}}return w},write:function p(t,r){var s=this;var q=[];this._data.forEach(function(v,u){for(prop in r){if(v[prop]!==r[prop]){return false}}q.push(u);return true});q.forEach(function(u){for(prop in t){s._data[u][prop]=t[prop]}});this._takeSnapshot()}});var d=h.core.utils.getNS("oo.Model");d.Store=j;return h})(oo||{});var oo=(function(oo){var ajaxPool=[];ajaxPool.insert=function insert(elem){if(undefined==this.autoIncrementKey){this.autoIncrementKey=0}this.autoIncrementKey++;ajaxPool[this.autoIncrementKey]=elem;return this.autoIncrementKey};ajaxPool.getNextKey=function getNextKey(){if(undefined==this.autoIncrementKey){this.autoIncrementKey=0}return this.autoIncrementKey+1};Request=function Request(key,isPermanent,defaultParams){this.url;this.method=Ajax.GET;this.defaultParams=defaultParams;this.key=key;this.isPermanent=isPermanent;this.xhr=new XMLHttpRequest();this.isOpen=false;this.isLoading=false;var me=this;this.xhr.addEventListener("readystatechange",function(){if(4==me.xhr.readyState){me.isOpen=me.isLoading=false;if(200==me.xhr.status){me.successCallback(JSON.parse(me.xhr.responseText))}else{me.errorCallback()}if(!isPermanent){me.destroy()}}})};var rp=Request.prototype;rp.parseJson=function(text){dataWrapper="(function () { return %json%; })()";var obj=eval(dataWrapper.replace("%json%",text));return obj};rp.destroy=function(){delete ajaxPool[this.key]};rp.setUrl=function(url){this.url=url};rp.setMethod=function(method){this.method=method};rp.setSuccessCallback=function(callback){this.successCallback=callback};rp.setErrorCallback=function(callback){this.errorCallback=callback};rp.open=function(){try{this.xhr.open(this.method,this.url,true);this.isOpen=true}catch(e){throw e}};rp.send=function(params){if(!this.isOpen){this.open()}var paramsString=this.encodeParams(params||this.defaultParams);if(Ajax.POST==this.method){this.xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}this.isLoading=true;this.xhr.send(paramsString)};rp.encodeParams=function encodeParams(params){var tmpArr=[];for(var p in params){tmpArr.push([p,"=",params[p]].join(""))}return tmpArr.join("&")};rp.abort=function(){this.xhr.abort()};var Ajax={POST:"POST",GET:"GET",ajaxCall:function(options){if(undefined==options.url||null==options.url||""==options.url){throw new Error("no URL parameter given")}options.isPermanent=false;var key=this.buildRequest(options);var req=ajaxPool[key];req.send();return key},buildRequest:function(options){if(undefined==options.url||null==options.url||""==options.url){throw new Error("no URL parameter given")}var method=options.method||this.GET;var params=options.params||{};var isPermanent=options.isPermanent||false;var success=options.success||function(){};var error=options.error||function(){};var key=ajaxPool.getNextKey();var req=new Request(key,isPermanent,params);req.setUrl(options.url);req.setMethod(method);req.setSuccessCallback(success);req.setErrorCallback(error);ajaxPool.insert(req);return key},getRequest:function(id){return ajaxPool[id]},getRequestStatus:function(id){return ajaxPool[id].isLoading},abortCall:function(id){if(ajaxPool[id]){ajaxPool[id].abort()}},destroy:function(id){if(ajaxPool[id]){ajaxPool[id].destroy()}},send:function(id,params){if(ajaxPool[id]){ajaxPool[id].send(params||{})}}};oo.Ajax=Ajax;return oo})(oo||{});var oo=(function(oo){var ClassList=my.Class({constructor:function constructor(obj){this._dom=obj;this._list=obj.className.split(" ")},destroy:function destroy(){this._dom=null;this._list.splice(0);this._list=null},_updateClassList:function _updateClassList(){this._dom.className=this._list.join(" ")},removeClass:function removeClass(clsName){if(typeof clsName=="string"){clsName=clsName.split(" ")}var updated=false;var that=this;clsName.forEach(function(element,index,array){var i=that._list.indexOf(element);if(-1!==i){that._list.splice(i,1);updated=true}});if(updated){this._updateClassList()}},addClass:function addClass(clsName){if(typeof clsName=="string"){clsName=clsName.split(" ")}if(!this.hasClass(clsName)){clsName.splice(0,0,0,0);Array.prototype.splice.apply(this._list,clsName);this._updateClassList()}},setClass:function setClass(clsName){if(typeof clsName=="string"){clsName=clsName.split(" ")}this._list=clsName;this._updateClassList()},hasClass:function hasClass(clsName){var i=this._list.indexOf(clsName);if(-1===i){return false}else{return true}},getClasses:function getClasses(){return this._list}});var prop={readOnly:[],readWrite:["width","height","zIndex","display","top","right","bottom","left","webkitTransitionProperty","webkitTransitionTimingFunction","webkitTransitionDuration"]};var Dom=my.Class({STATIC:{CSSMATRIXPATTERN:/matrix\(1, 0, 0, 1, (-?[0-9.]+), (-?[0-9.]+)\)/},constructor:function constructor(identifier){this._dom;this._cached={};this._template;this._cacheTpl;if(typeof identifier=="string"){this.setDomObject(document.querySelector(identifier))}else{this.setDomObject(identifier)}this.generateAccessor();this.classList=new ClassList(this._dom)},destroy:function destroy(){this.classList.destroy();this.classList=null;this._cached.splice(0);this._cached=null;this._dom.removeEventListeners();document.removeElement(this._dom);this._dom=null},generateAccessor:function generateAccessor(){var p=this;for(var i=0,len=prop.readOnly.length;i<len;i++){eval(["p.get",prop.readOnly[i].charAt(0).toUpperCase(),prop.readOnly[i].slice(1)," = function (unit, noCache) { if (noCache || !this._cached[['",prop.readOnly[i],"',(unit ? 'u' : '')].join('')]) { this._cached[['",prop.readOnly[i],"',(unit ? 'u' : '')].join('')] = (unit ? window.getComputedStyle(this._dom).",prop.readOnly[i]," : (window.getComputedStyle(this._dom).",prop.readOnly[i],").replace(/s|ms|px|em|pt|%/, '')); this._cached[['",prop.readOnly[i],"',(unit ? 'u' : '')].join('')] = parseInt(this._cached[['",prop.readOnly[i],"',(unit ? 'u' : '')].join('')], 10) || this._cached[['",prop.readOnly[i],"',(unit ? 'u' : '')].join('')]; } return this._cached[['",prop.readOnly[i],"', (unit ? 'u' : '')].join('')]; };"].join(""))}for(var i=0,len=prop.readWrite.length;i<len;i++){eval(["p.get",prop.readWrite[i].charAt(0).toUpperCase(),prop.readWrite[i].slice(1)," = function (unit, noCache) { if (noCache || !this._cached[['",prop.readWrite[i],"',(unit ? 'u' : '')].join('')]) { this._cached[['",prop.readWrite[i],"',(unit ? 'u' : '')].join('')] = (unit ? window.getComputedStyle(this._dom).",prop.readWrite[i]," : (window.getComputedStyle(this._dom).",prop.readWrite[i],").replace(/s|ms|px|em|pt|%/, '')); this._cached[['",prop.readWrite[i],"',(unit ? 'u' : '')].join('')] = parseInt(this._cached[['",prop.readWrite[i],"',(unit ? 'u' : '')].join('')], 10) || this._cached[['",prop.readWrite[i],"',(unit ? 'u' : '')].join('')]; } return this._cached[['",prop.readWrite[i],"', (unit ? 'u' : '')].join('')]; };"].join(""));eval(["p.set",prop.readWrite[i].charAt(0).toUpperCase(),prop.readWrite[i].slice(1)," = function (val, unit) { if (this._cached['",prop.readWrite[i],"'] || this._cached[['",prop.readWrite[i],"', 'u'].join('')]) { this._cached['",prop.readWrite[i],"'] = this._cached[['",prop.readWrite[i],"', 'u'].join('')] = null; } this._dom.style.",prop.readWrite[i]," = [val, (undefined !== unit ? unit : '')].join(''); return this };"].join(""))}},getTranslations:function getTranslations(noCache){if(!this._cached.webkitTranslations||noCache){var values=this.getWebkitTransform().match(Dom.CSSMATRIXPATTERN);if(null===values){values=[0,0,0]}this._cached.webkitTranslations=[parseInt(values[1],10),parseInt(values[2],10)]}return this._cached.webkitTranslations},getWebkitTransform:function getWebkitTransform(noCache){if(!this._cached.webkitTransform||noCache){this._cached.webkitTransform=window.getComputedStyle(this._dom).webkitTransform}return this._cached.webkitTransform},setWebkitTransform:function setWebkitTransform(value){if(this._cached.webkitTransform||this._cached.webkitTranslations){this._cached.webkitTransform=null;this._cached.webkitTranslations=null}this._dom.style.webkitTransform=value;return this},setTranslations:function setTranslations(x,y,unit){unit=unit||"px";this.setWebkitTransform(["translate3d(",x,unit,", ",y,unit,", 0)"].join(""));return this},getTranslateX:function getTranslateX(unit,noCache){return(unit?[this.getTranslations(noCache)[0],"px"].join(""):this.getTranslations(noCache)[0])},getTranslateY:function getTranslateY(unit,noCache){return(unit?[this.getTranslations(noCache)[1],"px"].join(""):this.getTranslations(noCache)[1])},setTranslateX:function setTranslateX(val){var valY=this.getTranslateY();this.setTranslations(val,valY);return this},setTranslateY:function setTranslateY(val){var valX=this.getTranslateX();this.setTranslations(valX,val);return this},setDomObject:function setDomObject(domNode){this._dom=domNode;if(!this._dom.id){this._dom.id=oo.core.utils.generateId(this._dom.tagName)}return this},getDomObject:function getDomObject(){return this._dom},find:function find(selector){return new Dom(this._dom.querySelector(selector))},findParentByCls:function findParentByCls(cls){var p=this._dom.parentNode;var pattern=new RegExp(cls);while(!pattern.test(p.className)&&p){p=this._dom.parentNode}if(p){return new Dom(p)}else{return false}},appendDomNode:function appendDomNode(domNode){this._dom.appendChild(domNode);return this},appendChild:function appendChild(node){if(node instanceof Dom){this.appendDomNode(node.getDomObject())}else{this.appendDomNode(node)}return this},appendHtml:function appendHtml(html){this._dom.innerHTML=[this._dom.innerHTML,html].join("");return this},clear:function clear(){this._dom.innerHTML="";return this},stopAnimation:function stopAnimation(){this.setWebkitTransitionDuration(0,"ms");this._dom.removeEventListener("webkitTransitionEnd");return this},translateTo:function translateTo(coord,duration,listener,timingFunction){if(typeof coord==="object"){coord.x=undefined!==coord.x?coord.x:this.getTranslateX();coord.y=undefined!==coord.y?coord.y:this.getTranslateY()}var currentTransitionDuration=(this.getWebkitTransitionDuration()*1000);duration=duration||0;this.setWebkitTransitionDuration(duration,"ms");var currentTimingFunction=this.getWebkitTransitionTimingFunction();if(typeof timmingFunction==="string"){this.setWebkitTransitionTimingFunction(timingFunction,"")}var that=this,endListener=function endListener(e){that._dom.removeEventListener("webkitTransitionEnd",this);that.setWebkitTransitionDuration(currentTransitionDuration,"ms");that.setWebkitTransitionTimingFunction(currentTimingFunction,"");if(listener){listener.call(that,e)}};this._dom.addEventListener("webkitTransitionEnd",endListener,false);this.setTranslations(coord.x,coord.y);return this},setTemplate:function setTemplate(tpl){this._template=tpl;return this},render:function render(data,tpl,resetCache){if(tpl){this.setTemplate(tpl)}if(!this._cacheTpl||resetCache){data=data||{};this._cacheTpl=Mustache.to_html(this._template,data)}this.appendHtml(this._cacheTpl);return this}});Dom.createElement=function createElement(tag){return new Dom(document.createElement(tag))};var exports=oo.core.utils.getNS("oo.View");exports.Dom=Dom;return oo})(oo||{});var oo=(function(f){var d=f.View.Dom,k=f.Touch,o=f.core.utils,j=f.Events;var p=my.Class({STATIC:{ANIM_RTL:"rtl",ANIM_LTR:"ltr",NO_ANIM:"none",ANIM_DURATION:500},constructor:function m(u){u=u||"body";this._root=new d(u);this.classList=this._root.classList;this._panels=[];this._panelsDic=[];this._enabledPanels=[];this._focusedStack=[]},hasPanel:function b(u){return -1!=this._panelsDic.indexOf(u)?true:false},addPanel:function h(u,w,B,A,v){var z=new d.createElement("div");z.getDomObject().id=w;z.classList.addClass("oo-panel");var x=u;var y={};if(typeof u=="object"&&u.template){x=u.template;y=u.data||{}}z.setTemplate(x);this._panels.push(z);this._panelsDic.push(w);if(B){v=A||v;z.render(y);this.showPanel(w,v)}else{if(A){z.render(y)}}},_identifierToIndex:function e(v){var u=v;if(typeof u=="string"){u=this._panelsDic.indexOf(u)}return u},_indexToIdentifier:function n(u){return u=this._panelsDic[u]},_enablePanel:function a(v){var u=this._identifierToIndex(v);this._root.appendChild(this._panels[u]);this._enabledPanels.push(u);j.triggerEvent("onEnablePanel",this._panels[u],[{identifier:this._indexToIdentifier(u),panel:this._panels[u]}])},getFocusedPanel:function g(u){index=this._focusedStack[this._focusedStack.length-1];if(u){return undefined!==index?index:false}else{return this.getPanel(index)}},getPanel:function s(u){return this._panels[this._identifierToIndex(u)]||false},panelIsEnable:function q(u){return(-1!=this._enabledPanels.indexOf(this._identifierToIndex(u))?true:false)},removePanel:function i(u){var v=this._identifierToIndex(u);this._panels[v].destroy();this._panels.slice(v,1);this._panelsDic.slice(v,1)},showPanel:function r(v,y){var w=this._identifierToIndex(v);y=y||p.ANIM_RTL;var u=0;if(y!==p.NO_ANIM){var x=this._root.getWidth()*(y==p.ANIM_RTL?1:-1);this.getPanel(w).setTranslateX(x);u=p.ANIM_DURATION}if(!this.panelIsEnable(w)){this._enablePanel(w)}this.getPanel(w).translateTo({x:0},u);this._focusedStack.push(w);j.triggerEvent("onShowPanel",this._panels[w],[{identifier:this._indexToIdentifier(w),panel:this._panels[w]}])},hidePanel:function c(v,A,x){var w=this._identifierToIndex(v);A=A||p.ANIM_RTL;var u=0;if(A!==p.NO_ANIM){u=p.ANIM_DURATION}var z=this._root.getWidth()*(A==p.ANIM_RTL?-1:1);var y=this;this.getPanel(w).translateTo({x:z},p.ANIM_DURATION,function(){y.getPanel(w).stopAnimation()});if(w==this.getFocusedPanel(true)){this._focusedStack.pop()}j.triggerEvent("onHidePanel",this,[{identifier:this._indexToIdentifier(w),panel:this._panels[w]}])},switchPanel:function l(z,u,y){var w,v,x;if(typeof arguments[1]=="string"||1==arguments.length){w=u;x=z;v=this.getFocusedPanel(true)}else{v=z;x=u;w=y}this.showPanel(x,w);if(false!==v){this.hidePanel(v,w)}}});var t=o.getNS("oo.View");t.Viewport=p;return f})(oo||{});var oo=(function(h){var d=h.View.Touch;Events=h.Events;var g=my.Class(h.View.Dom,{STATIC:{EVT_TOUCH:"touch",EVT_RELEASE:"release"},constructor:function e(m){this._active=false;g.Super.call(this,m);this._initEvents()},getDom:function l(){return this._dom},_initEvents:function a(){var m=this;this.getDom().addEventListener(d.EVENT_START,function(n){return m._onTouch.call(m,n)});this.getDom().addEventListener(d.EVENT_END,function(n){return m._onRelease.call(m,n)})},_onTouch:function c(m){if(!this.isActive()){this.setActive(true)}Events.triggerEvent(g.EVT_TOUCH,this,[this,m])},_onRelease:function j(m){this.setActive(false);Events.triggerEvent(g.EVT_RELEASE,this,[this,m])},_toogleActive:function i(){this.setActive(!this._active)},isActive:function k(){return this._active},setActive:function b(m){if(m||undefined===m){this.classList.addClass("active");this._active=true}else{this.classList.removeClass("active");this._active=false}}});var f=h.core.utils.getNS("oo.View");f.Button=g;return h})(oo||{});var oo=(function(f){var d=f.View.Dom,a=f.Touch,j=f.Events,e=f.View.Button;var g=my.Class({STATIC:{TYPE_RADIO:"radio",TYPE_CHECKBOX:"checkbox"},contructor:function b(l,o){this._buttons=[];o=o||g.TYPE_RADIO;var n=document.querySelectorAll(l);var p=this;for(var m=0,k=n.length;m<k;m++){btn=new e(n[m]);btn._onRelease=function(q){h.call(btn,q,p)};this._buttons.push(btn);if(o==g.TYPE_RADIO){var p=this;j.addListener(e.EVT_TOUCH,function(q,r){p.updateActive.apply(p,[q,r])},btn)}}},updateActive:function i(n,l){for(var m=0,k=this._buttons.length;m<k;m++){if(this._buttons[m]!==n){this._buttons[m].setActive(false)}}}});var h=function h(l,k){if(this.isActive()){this.setActive(false)}j.triggerEvent("release",k,[l,this])};var c=f.core.utils.getNS("oo.View");c.ButtonGroup=g;return f})(oo||{});var oo=(function(j){var h=j.View.Dom,e=j.Touch,l=j.core.utils,p=j.Events,k=j.Store;var o=my.Class({STATIC:{EVT_RENDER:"render",EVT_ITEM_PRESSED:"item-pressed",EVT_ITEM_RELEASED:"item-released"},constructor:function f(s,t,r){this._data=null;this._touchedItem=null;this._store=s;var u=this;p.addListener(k.EVT_REFRESH,function(){u._refreshList.apply(u,arguments)},this._store);this.setTemplate(t||'<li class="oo-list-item item-{{id}}">{{.}}</li>');if(r){this._dom=new h(r)}else{this._dom=h.createElement("ul")}this._initEvents();this._refreshList()},_initEvents:function b(){function s(w){var u=new h(w);var x;if(u.classList.hasClass("oo-list-item")){x=u.getDomObject().className.match(/item-([0-9]*)/)[1]}else{var v=u.findParentByCls("oo-list-item");if(v){u=v;x=u.getDomObject().className.match(/item-([0-9]*)/)[1]}}if(x){return{id:x,dom:u}}return false}var t=this;var r;this._dom.getDomObject().addEventListener(e.EVENT_START,function(u){this._touchedItem=u.target;r=s(u.target);if(false!==r){r.dom.classList.addClass("active");p.triggerEvent(o.EVT_ITEM_PRESSED,t,[r.dom,r.id])}},false);this._dom.getDomObject().addEventListener(e.EVENT_MOVE,function(u){if(this._touchedItem){this._touchedItem=null;t._dom.find(".active").classList.removeClass("active")}},false);this._dom.getDomObject().addEventListener(e.EVENT_END,function(u){r=s(u.target);r.dom.classList.removeClass("active");if(false!==r&&this._touchedItem==u.target){p.triggerEvent(o.EVT_ITEM_RELEASED,t,[r.dom,r.id])}},false)},getDom:function q(){return this._dom},_refreshList:function i(){this._fetchStoreData();this._dom.clear();this._dom.render(this._data,this._template,true);p.triggerEvent(o.EVT_RENDER,this)},_prepareData:function m(r){return{items:r}},setData:function n(r){this._data=this._prepareData(r)},_fetchStoreData:function a(){this.setData(this._store.getData())},setTemplate:function d(r){this._template=this._prepareTpl(r)},_prepareTpl:function c(r){return["{{#items}}",r,"{{/items}}"].join("")}});var g=l.getNS("oo.View");g.List=o;return j})(oo||{});var oo=(function(i){var h=i.View.Dom,d=i.Touch,n=i.core.utils;var a=my.Class({STATIC:{VERTICAL:"v",HORIZONTAL:"h",BOTH:"b",NONE:"none"},constructor:function e(q,p,r){this._wrapper=new h(q);this._content=this._wrapper.find(".content");this._orientation=p||a.VERTICAL;this._displayScroll=r||a.BOTH;this._vscrollbarWrapper=null;this._vscrollbar=null;this._hscrollbarWrapper=null;this._hscrollbar=null;this._maxvScrollTranslate=null;this._maxhScrollTranslate=null;this._buildScrollbars();this.initSizes();this._startY=0;this._startX=0;this._touchStartY=null;this._touchInterY=null;this._touchStartX=null;this._touchInterX=null;this._startTime=null;this._render()},initSizes:function o(){this._content.getWidth(false,true);this._content.getHeight(false,true);this._content.translateTo({x:0,y:0},0);this._startY=0;this._startX=0;if(a.VERTICAL==this._orientation||a.BOTH==this._orientation){this._vscrollbar.setDisplay("");this._maxvTranslate=(this._wrapper.getHeight()-this._content.getHeight());if(this._maxvTranslate>0){this._maxvTranslate=0;this._vscrollbar.setDisplay("none")}this._determineScrollbarSize(a.VERTICAL);this._vscrollbar.translateTo({y:0},0)}if(a.HORIZONTAL==this._orientation||a.BOTH==this._orientation){this._hscrollbar.setDisplay("");this._maxhTranslate=(this._content.getWidth()-this._wrapper.getWidth());if(this._maxhTranslate<0){this._maxhTranslate=0;this._hscrollbar.setDisplay("none")}this._determineScrollbarSize(a.HORIZONTAL);this._hscrollbar.translateTo({x:0},0)}},_buildScrollbars:function c(){if(a.VERTICAL==this._orientation||a.BOTH==this._orientation){this._vscrollbarWrapper=h.createElement("div");this._vscrollbar=h.createElement("div");this._vscrollbar.classList.addClass("oo-scrollbar");this._vscrollbar.setWidth(100,"%");this._vscrollbarWrapper.classList.addClass("oo-scroll-wrapper");this._vscrollbarWrapper.classList.addClass("oo-vscroll-wrapper");this._vscrollbarWrapper.appendChild(this._vscrollbar)}if(a.HORIZONTAL==this._orientation||a.BOTH==this._orientation){this._hscrollbarWrapper=h.createElement("div");this._hscrollbar=h.createElement("div");this._hscrollbar.classList.addClass("oo-scrollbar");this._hscrollbar.setHeight(100,"%");this._hscrollbarWrapper.classList.addClass("oo-scroll-wrapper");this._hscrollbarWrapper.classList.addClass("oo-hscroll-wrapper");this._hscrollbarWrapper.appendChild(this._hscrollbar)}},_renderScrollbars:function l(){if((this._displayScroll==a.VERTICAL||this._displayScroll==a.BOTH)&&(a.VERTICAL==this._orientation||a.BOTH==this._orientation)){this._wrapper.appendChild(this._vscrollbarWrapper)}if((this._displayScroll==a.HORIZONTAL||this._displayScroll==a.BOTH)&&(a.HORIZONTAL==this._orientation||a.BOTH==this._orientation)){this._wrapper.appendChild(this._hscrollbarWrapper)}},_determineScrollbarSize:function b(p){var r=(a.VERTICAL==p?"Height":"Width");var q=this._content[["get",r].join("")]()/this._wrapper[["get",r].join("")]();var s=parseInt(this._wrapper[["get",r].join("")]()/q,10);this[["_",p,"scrollbar"].join("")][["set",r].join("")](s);this[["_max",p,"ScrollTranslate"].join("")]=this._wrapper[["get",r].join("")]()-s},_determineScrollbarTranslate:function k(q,p){var r=this[["_max",p,"Translate"].join("")]/q;return(this[["_max",p,"ScrollTranslate"].join("")]/r)*(a.HORIZONTAL==p?-1:1)},_initListeners:function f(){var q=this._content.getDomObject();var p=this;var r;q.addEventListener(d.EVENT_START,function(s){r=0;if(a.VERTICAL==this._orientation||a.BOTH==this._orientation){p._vscrollbar.stopAnimation()}if(a.HORIZONTAL==this._orientation||a.BOTH==this._orientation){p._hscrollbar.stopAnimation()}p._content.stopAnimation();p._touchStartY=p._touchInterY=d.getPositionY(s);p._touchStartX=p._touchInterX=d.getPositionX(s);p._startTime=(new Date).getTime();p._startY=p._content.getTranslateY(false,true);p._startX=p._content.getTranslateX(false,true)},false);q.addEventListener(d.EVENT_MOVE,function(u){var t,s;if(a.VERTICAL==p._orientation||a.BOTH==p._orientation){t=d.getPositionY(u)-p._touchStartY;s=p._startY+t;p._content.setTranslateY(s);p._vscrollbar.setTranslateY(p._determineScrollbarTranslate(s,a.VERTICAL))}if(a.HORIZONTAL==p._orientation||a.BOTH==p._orientation){t=d.getPositionX(u)-p._touchStartX;s=p._startX+t;p._content.setTranslateX(s);p._hscrollbar.setTranslateX(p._determineScrollbarTranslate(s,a.HORIZONTAL))}r++;u.preventDefault()},false);q.addEventListener(d.EVENT_END,function(w){var t=(new Date).getTime();var v=t-p._startTime;var s=0.0006;var u=500;function x(y){var A=p._content[["getTranslate",(a.VERTICAL==y?"Y":"X")].join("")](false,true);var E=null;var z=d[["getPosition",(a.VERTICAL==y?"Y":"X")].join("")](w);var D=z-p[["_touchInter",(a.VERTICAL==y?"Y":"X")].join("")];var C=Math.abs(D)/v;var B=((C*C)/(2*s))*(D<0?-1:1);if((a.VERTICAL==y&&A>0)||(a.HORIZONTAL==y&&A>0)){E=0}else{if((a.VERTICAL==y&&A<p[["_max",y,"Translate"].join("")])||(a.HORIZONTAL==y&&Math.abs(A)>p[["_max",y,"Translate"].join("")])){E=p[["_max",y,"Translate"].join("")]*(a.HORIZONTAL==y?-1:1)}else{E=p._content[["getTranslate",(a.VERTICAL==y?"Y":"X")].join("")](false,true)+B;E=parseInt((E>0?0:(E<p[["_max",y,"Translate"].join("")]?p[["_max",y,"Translate"].join("")]:E)),10)*(a.HORIZONTAL==y?-1:1);u=C/s}}if(E!==null){var F={};F[(a.VERTICAL==y?"y":"x")]=E;p._content.translateTo(F,u,function(){p._content.stopAnimation()});F[(a.VERTICAL==y?"y":"x")]=p._determineScrollbarTranslate(E,y);p[["_",y,"scrollbar"].join("")].translateTo(F,u,function(){p[["_",y,"scrollbar"].join("")].stopAnimation()},"ease-out");p[["_start",(a.VERTICAL==y?"Y":"X")].join("")]=E}}if(a.VERTICAL==p._orientation||a.BOTH==p._orientation){x(a.VERTICAL)}if(a.HORIZONTAL==p._orientation||a.BOTH==p._orientation){x(a.HORIZONTAL)}},false)},_render:function j(){this._wrapper.classList.addClass("oo-list-wrapper");this._initListeners();this._renderScrollbars()},destroy:function m(){this._wrapper.destroy();this._content.getDomObject().removeEventListener(d.EVENT_START);this._content.getDomObject().removeEventListener(d.EVENT_MOVE);this._content.getDomObject().removeEventListener(d.EVENT_END);this._content.destroy();this._vscrollbarWrapper.destroy();this._vscrollbar.destroy();this._hscrollbarWrapper.destroy();this._hscrollbar.destroy()}});var g=n.getNS("oo.View");g.Scroll=a;return i})(oo||{});var oo=(function(i){var g=i.Dom,b=i.Touch,k=i.core.utils;var j=my.Class({constructor:function c(m,n){this._startX=0;this._startTranslate=0;this._panelContainer=new g(m);this._transitionDuration=200;var o=this._panelContainer.getDomObject();this._panelWidth=(new g(o.firstElementChild)).getWidth();this._nbPanel=document.querySelectorAll([m," > *"].join("")).length;this._activePanel=0;this._displayPager=(n?true:false);this._pager=null;this._buildPager();this._moved=false;this.render()},_buildPager:function h(){if(this._displayPager){this._pager=g.createElement("div");this._pager.classList.addClass("carousel-pager");this._pager.setTemplate('{{#bullet}}<i class="dot"></i>{{/bullet}}');var n=[];for(var m=0;m<this._nbPanel;m++){n.push(m)}this._pager.render({bullet:n})}this._updatePager()},_updatePager:function e(){var m=this._pager.getDomObject().querySelector(".dot.active");if(m){m.className=m.className.replace(/ *active/,"")}this._pager.getDomObject().querySelector([".dot:nth-child(",(this._activePanel+1),")"].join("")).className+=" active"},hasMoved:function l(){return this._moved},_initListeners:function d(){var n=this._panelContainer.getDomObject();var m=this;var o;n.addEventListener(b.EVENT_START,function(p){m._startX=b.getPositionX(p);m._startTranslate=m._panelContainer.getTranslateX();o=0},false);n.addEventListener(b.EVENT_MOVE,function(q){var p=b.getPositionX(q)-m._startX;m._panelContainer.translateTo({x:(m._startTranslate+p)},0);m._moved=true},false);n.addEventListener(b.EVENT_END,function(){m._moved=false;var s=m._panelContainer.getTranslateX();var t;if(s<0){s=Math.abs(s);var r=(m._panelWidth/2),p=(m._panelWidth*(m._nbPanel-1)-r);for(var q=r;q<=p;q=q+m._panelWidth){if(s<q){break}}if(s>p){t=p+r}else{t=q-r}t*=-1}else{t=0}m._activePanel=Math.abs(t/m._panelWidth);m._panelContainer.translateTo({x:t},m._transitionDuration);m._updatePager();m._startTranslate=t},false)},render:function a(){if(this._pager){(new g(this._panelContainer.getDomObject().parentNode)).appendChild(this._pager)}this._initListeners()}});var f=k.getNS("oo.View");f.Carousel=j;return i})(oo||{});